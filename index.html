<!DOCTYPE html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="node_modules/infusion/dist/infusion-all.js"></script>
    <meta charset="UTF-8">
    <title>Hello World!</title>
  </head>
  <body>
    <h1>Hello World!</h1>
    <div class="helloWorld">
      <div class="flc-messageArea"></div>
    </div>

    <!-- All of the Node.js APIs are available in this renderer process. -->
    We are using Node.js <script>document.write(process.versions.node)</script>,
    Chromium <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>.
  </body>
  <script>
(function() {
    //var fluid = require('infusion');
    var fluidTutorial = fluid.registerNamespace('fluidTutorial');
    var helloWorld;

    console.log(fluid)

    fluid.defaults("fluidTutorial.helloWorld", {
        gradeNames: ["fluid.viewComponent"],
        model: {
            message: "Hello, World!"
        },
        // Creates a binding between the
        // selector named 'messageArea'
        // and the jQuery selector '.flc-messageArea'
        selectors: {
            messageArea: ".flc-messageArea"
        },
        listeners: {
            "onCreate.displayHello": "{that}.displayHello"
        },
        modelListeners: {
            message: "{that}.sayHello"
        },
        invokers: {
            sayHello: {
                "funcName": "fluidTutorial.helloWorld.consoleHello",
                args: ["{that}.model.message"]
            },
            // Another invoker to call a jQuery
            // method on a DOM node returned
            // using the DOM binder functionality
            displayHello: {
                // This IoC reference lets us refer  
                // to the DOM node bound to the
                // `messageArea` key by the selector
                // definition above; it returns a
                // standard jQuery object
                "this": "{that}.dom.messageArea",
                // Calls the 'html' function of a jQuery
                // object to replace the HTML at the node
                method: "html",
                args: ["{that}.model.message"]
            }
        }
    });

    fluidTutorial.helloWorld.consoleHello = function (message) {
        console.log(message);
    };

    $(document).ready(function () {
      helloWorld = fluidTutorial.helloWorld(".helloWorld", {});
    });
})()
  </script>
  <script>
    // You can also require other files to run in this process
    require('./renderer.js')
  </script>
</html>
